<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scam Alert System - Admin</title>
  <style>
    /* (same CSS as before, unchanged for UI look) */
    *{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Poppins',sans-serif;background:#1a1a1a;color:#e0e0e0;overflow-x:hidden;}
    header{text-align:center;padding:40px 20px;background:linear-gradient(145deg,#6a6e73,#44484d);color:#fff;border-radius:15px;box-shadow:0 4px 8px rgba(0,0,0,.3);margin-bottom:30px;position:relative;}
    h1{font-size:3rem;font-weight:600;letter-spacing:1px;}
    #search-box{margin-top:20px;padding:10px;border-radius:5px;border:none;width:80%;max-width:500px;font-size:1rem;background-color:#2e2e2e;color:#e0e0e0;transition:background-color .3s;}
    #search-box:focus{background-color:#3a3a3a;}
    .logout-btn{position:absolute;top:20px;right:20px;padding:10px 20px;background-color:#FF5252;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s;}
    .logout-btn:hover{background-color:#e04848;}
    .filters{text-align:center;margin-bottom:20px;}
    .filter-btn{padding:10px 20px;background-color:#2e2e2e;color:#ccc;border:none;border-radius:20px;font-size:1rem;margin:5px;cursor:pointer;transition:background-color .3s,transform .2s,color .3s;}
    .filter-btn:hover{background-color:#FF5252;transform:scale(1.1);}
    .filter-btn.active{background-color:#FF5252;color:#fff;}
    .scams-list{display:flex;flex-direction:column;gap:20px;padding:0 10px;margin-bottom:30px;}
    .scam{background:#2e2e2e;padding:20px;border-radius:15px;box-shadow:0 4px 8px rgba(0,0,0,.3);transition:transform .3s,background-color .3s;cursor:pointer;display:flex;justify-content:space-between;align-items:center;width:100%;max-width:900px;margin:0 auto;}
    .scam:hover{background-color:#3a3a3a;transform:scale(1.02);}
    .scam-title{font-size:1.6rem;font-weight:500;color:#e0e0e0;}
    .scam-date{font-size:1rem;color:#ccc;text-align:right;}
    .modal{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.8);padding-top:60px;}
    .modal-content{background-color:#333;margin:5% auto;padding:25px;border-radius:10px;width:80%;max-width:800px;position:relative;line-height:1.5;}
    .modal-content h2{font-size:2rem;margin-bottom:20px;color:#e0e0e0;}
    .modal-content h3{font-size:1.4rem;margin:20px 0 10px;color:#FF5252;}
    .modal-content p{margin:10px 0;color:#e0e0e0;}
    .modal-content ul{margin-left:20px;color:#e0e0e0;}
    .close{color:#e0e0e0;font-size:28px;font-weight:bold;position:absolute;top:15px;right:15px;cursor:pointer;}
    .close:hover{color:#FF5252;}
    footer{text-align:center;background-color:#1a1a1a;padding:20px;color:#bbb;}
    .admin-controls{text-align:center;margin-bottom:30px;padding:20px;background:#2e2e2e;border-radius:15px;box-shadow:0 4px 8px rgba(0,0,0,.3);}
    .admin-controls h2{margin-bottom:20px;color:#e0e0e0;}
    .admin-controls button,.admin-controls select,.admin-controls input[type="text"],.admin-controls input[type="date"],.admin-controls textarea{margin:10px;padding:10px;border-radius:5px;border:none;background-color:#3a3a3a;color:#e0e0e0;font-size:1rem;width:80%;max-width:500px;}
    .admin-controls input[type="date"]::-webkit-calendar-picker-indicator{filter:invert(1);}
    .admin-controls button{background-color:#FF5252;cursor:pointer;transition:background-color .3s,transform .2s,color .3s;}
    .admin-controls button:hover{background-color:#e04848;transform:scale(1.05);}
    .admin-form-group{display:flex;flex-direction:column;align-items:stretch;margin-bottom:15px;width:80%;max-width:500px;}
    .admin-form-group label{text-align:left;margin-bottom:5px;color:#ccc;}
  </style>
</head>
<body>
  <header>
    <h1>Scam Alert System - Admin Panel</h1>
    <input type="text" id="search-box" placeholder="Search scams...">
    <button class="logout-btn" onclick="logout()">Logout</button>
  </header>

  <div class="admin-controls">
    <h2>Admin Actions</h2>
    <div id="add-scam-section">
      <h3>Add New Scam</h3>
      <div class="admin-form-group">
        <label for="add-scam-category">Category:</label>
        <select id="add-scam-category">
          <option value="online">Online Scams</option>
          <option value="phone">Phone Scams</option>
          <option value="dating">Dating Scams</option>
        </select>
      </div>
      <div class="admin-form-group">
        <label for="add-scam-title">Title:</label>
        <input type="text" id="add-scam-title" placeholder="Scam Title">
      </div>
      <div class="admin-form-group">
        <label for="add-scam-date">Date:</label>
        <input type="date" id="add-scam-date">
      </div>
      <div class="admin-form-group">
        <label for="add-scam-description">Description:</label>
        <textarea id="add-scam-description" placeholder="Scam Description"></textarea>
      </div>
      <div class="admin-form-group">
        <label for="add-scam-precautions">Precautions (comma-separated):</label>
        <textarea id="add-scam-precautions" placeholder="Precaution 1, Precaution 2, ..."></textarea>
      </div>
      <div class="admin-form-group">
        <label for="add-scam-links">Related Links (comma-separated):</label>
        <textarea id="add-scam-links" placeholder="https://example.com, https://another.com"></textarea>
      </div>
      <button onclick="addScam()">Add Scam</button>
    </div>

    <div id="edit-delete-scam-section">
      <h3>Edit/Delete Scam</h3>
      <div class="admin-form-group">
        <label for="select-scam">Select Scam to Edit/Delete:</label>
        <select id="select-scam"></select>
      </div>
      <button onclick="editScamForm()">Edit Scam</button>
      <button onclick="deleteScam()">Delete Scam</button>

      <div id="edit-form" style="display:none;">
        <h3>Edit Selected Scam</h3>
        <div class="admin-form-group">
          <label for="edit-scam-category">Category:</label>
          <select id="edit-scam-category">
            <option value="online">Online Scams</option>
            <option value="phone">Phone Scams</option>
            <option value="dating">Dating Scams</option>
          </select>
        </div>
        <div class="admin-form-group">
          <label for="edit-scam-title">Title:</label>
          <input type="text" id="edit-scam-title" placeholder="Scam Title">
        </div>
        <div class="admin-form-group">
          <label for="edit-scam-date">Date:</label>
          <input type="date" id="edit-scam-date">
        </div>
        <div class="admin-form-group">
          <label for="edit-scam-description">Description:</label>
          <textarea id="edit-scam-description" placeholder="Scam Description"></textarea>
        </div>
        <div class="admin-form-group">
          <label for="edit-scam-precautions">Precautions:</label>
          <textarea id="edit-scam-precautions"></textarea>
        </div>
        <div class="admin-form-group">
          <label for="edit-scam-links">Links:</label>
          <textarea id="edit-scam-links"></textarea>
        </div>
        <button onclick="updateScam()">Update Scam</button>
        <button onclick="cancelEdit()">Cancel</button>
      </div>
    </div>
  </div>

  <div class="filters">
    <button class="filter-btn active" onclick="filterScams('all')">All</button>
    <button class="filter-btn" onclick="filterScams('online')">Online</button>
    <button class="filter-btn" onclick="filterScams('phone')">Phone</button>
    <button class="filter-btn" onclick="filterScams('dating')">Dating</button>
  </div>

  <div class="scams-list"></div>

  <div id="scamModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">×</span>
      <div id="modalDetails"></div>
    </div>
  </div>

  <footer>
    <p>© 2025 Scam Alert System</p>
  </footer>

  <script>
    // ✅ Local JS data (instead of backend)
    let scams = [
      {id:1, category:"online", title:"Fake Shopping Site", date:"01/05/2025", description:"Scammers create fake online shops.", precautions:["Check URL","Use trusted sites"], links:["https://example.com"]},
      {id:2, category:"phone", title:"Phishing Call", date:"01/20/2025", description:"Scammers impersonate banks.", precautions:["Don't share OTP","Verify number"], links:["https://another.com"]}
    ];
    let editingScamId = null;

    function formatDateForDisplay(dateString){
      const [m,d,y] = dateString.split("/");
      return new Date(`${y}-${m}-${d}`).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});
    }

    function showModal(scam){
      document.getElementById("modalDetails").innerHTML=`
        <h2>${scam.title}</h2>
        <p><strong>Date:</strong> ${formatDateForDisplay(scam.date)}</p>
        <p>${scam.description}</p>
        <h3>Precautions:</h3>
        <ul>${scam.precautions.map(p=>`<li>${p}</li>`).join("")}</ul>
        <h3>Links:</h3>
        <ul>${scam.links.map(l=>`<li><a href="${l}" target="_blank">${l}</a></li>`).join("")}</ul>
      `;
      document.getElementById("scamModal").style.display="block";
    }
    function closeModal(){document.getElementById("scamModal").style.display="none";}

    function populateScams(category="all"){
      const list=document.querySelector(".scams-list");list.innerHTML="";
      const select=document.getElementById("select-scam");select.innerHTML='<option value="">Select Scam</option>';
      scams.filter(s=>category==="all"||s.category===category).forEach(s=>{
        let div=document.createElement("div");div.className="scam";
        div.innerHTML=`<div class="scam-title">${s.title}</div><div class="scam-date">${formatDateForDisplay(s.date)}</div>`;
        div.onclick=()=>showModal(s);list.appendChild(div);
        let opt=document.createElement("option");opt.value=s.id;opt.textContent=s.title;select.appendChild(opt);
      });
    }

    function addScam(){
      const cat=document.getElementById("add-scam-category").value;
      const title=document.getElementById("add-scam-title").value;
      const date=document.getElementById("add-scam-date").value;
      const desc=document.getElementById("add-scam-description").value;
      if(!title||!date||!desc){alert("Fill all fields");return;}
      const prec=document.getElementById("add-scam-precautions").value.split(",").map(p=>p.trim()).filter(Boolean);
      const links=document.getElementById("add-scam-links").value.split(",").map(p=>p.trim()).filter(Boolean);
      let newId=scams.length?Math.max(...scams.map(s=>s.id))+1:1;
      scams.push({id:newId,category:cat,title, date:new Date(date).toLocaleDateString("en-US"),description:desc,precautions:prec,links});
      alert("Scam added!");
      populateScams();
    }

    function deleteScam(){
      let id=document.getElementById("select-scam").value;if(!id){alert("Select scam");return;}
      scams=scams.filter(s=>s.id!=id);alert("Deleted!");populateScams();
    }

    function editScamForm(){
      let id=document.getElementById("select-scam").value;if(!id){alert("Select scam");return;}
      editingScamId=id;let s=scams.find(x=>x.id==id);
      document.getElementById("edit-scam-category").value=s.category;
      document.getElementById("edit-scam-title").value=s.title;
      document.getElementById("edit-scam-date").value=new Date(s.date).toISOString().split("T")[0];
      document.getElementById("edit-scam-description").value=s.description;
      document.getElementById("edit-scam-precautions").value=s.precautions.join(", ");
      document.getElementById("edit-scam-links").value=s.links.join(", ");
      document.getElementById("edit-form").style.display="block";
    }
    function updateScam(){
      let s=scams.find(x=>x.id==editingScamId);
      s.category=document.getElementById("edit-scam-category").value;
      s.title=document.getElementById("edit-scam-title").value;
      s.date=new Date(document.getElementById("edit-scam-date").value).toLocaleDateString("en-US");
      s.description=document.getElementById("edit-scam-description").value;
      s.precautions=document.getElementById("edit-scam-precautions").value.split(",").map(p=>p.trim());
      s.links=document.getElementById("edit-scam-links").value.split(",").map(p=>p.trim());
      alert("Updated!");
      document.getElementById("edit-form").style.display="none";editingScamId=null;
      populateScams();
    }
    function cancelEdit(){document.getElementById("edit-form").style.display="none";editingScamId=null;}

    function filterScams(cat){document.querySelectorAll(".filter-btn").forEach(b=>b.classList.remove("active"));event.target.classList.add("active");populateScams(cat);}
    function searchScams(){let t=document.getElementById("search-box").value.toLowerCase();const list=document.querySelector(".scams-list");list.innerHTML="";scams.filter(s=>s.title.toLowerCase().includes(t)||s.description.toLowerCase().includes(t)).forEach(s=>{let d=document.createElement("div");d.className="scam";d.innerHTML=`<div class="scam-title">${s.title}</div><div class="scam-date">${formatDateForDisplay(s.date)}</div>`;d.onclick=()=>showModal(s);list.appendChild(d);});}

    function logout(){alert("Logged out!");window.location.href="saslogin.html";}

    document.addEventListener("DOMContentLoaded",()=>{populateScams();document.getElementById("search-box").addEventListener("input",searchScams);});
  </script>
</body>
</html>
